#!/usr/bin/env python
import scanner
import optparse


# arguments for running the 
def get_arguments():
		parse_me = optparse.OptionParser()
		parse_me.add_option("-u","--url",dest="url",help="The target URL of the web application to scan.")
		(options,arguments) = parse_me.parse_args()
		if not options.url:
			parse_me.error("[-] Please specify the target url, use -h or --help for more info")
			#print("[-] Please specify an interface, use -h or --help for more info")
			#exit(0)
		return options


options = get_arguments()

url = options.url

#to avoid loggin out by send a request to that link
refused_link = [url+"logout.php"]

# a check for the login case: 
data_dict={"username":"admin","password":"password","Login":"submit"}

login_url = url+"login.php"  #input("log in url: ")   #===> this means creating a session also

a_scanner = scanner.Scanner(url,refused_link)

response = a_scanner.session.post(login_url,data=data_dict)


a_scanner.crawl(url)
a_scanner.run_scanner()
